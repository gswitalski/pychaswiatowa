<div class="image-upload">
    @if (hasImage) {
        <div class="image-preview">
            <img [src]="displayImageUrl" alt="Podgląd zdjęcia przepisu" />
            <div class="image-overlay">
                <button
                    mat-icon-button
                    type="button"
                    (click)="removeImage()"
                    class="remove-btn"
                    aria-label="Usuń zdjęcie"
                >
                    <mat-icon>delete</mat-icon>
                </button>
            </div>
        </div>
        @if (fileName()) {
            <p class="file-name">{{ fileName() }}</p>
        }
    } @else {
        <div class="upload-area">
            <input
                type="file"
                #fileInput
                accept="image/jpeg,image/png,image/webp"
                (change)="onFileSelected($event)"
                class="file-input"
            />
            <div class="upload-content" (click)="fileInput.click()">
                <mat-icon class="upload-icon">add_photo_alternate</mat-icon>
                <p class="upload-text">Kliknij, aby dodać zdjęcie</p>
                <p class="upload-hint">JPG, PNG lub WebP (max. 5MB)</p>
            </div>
        </div>
    }

    @if (error()) {
        <div class="upload-error">
            <mat-icon>error</mat-icon>
            <span>{{ error() }}</span>
        </div>
    }

    @if (hasImage) {
        <button
            mat-stroked-button
            type="button"
            (click)="fileInput.click()"
            class="change-image-btn"
        >
            <mat-icon>image</mat-icon>
            Zmień zdjęcie
        </button>
        <input
            type="file"
            #fileInput
            accept="image/jpeg,image/png,image/webp"
            (change)="onFileSelected($event)"
            class="file-input"
        />
    }
</div>

