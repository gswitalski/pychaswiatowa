<div class="recipes-list-page">
    <pych-page-header title="Moje przepisy">
        <a mat-stroked-button routerLink="/recipes/import">
            <mat-icon>upload_file</mat-icon>
            Importuj przepis
        </a>
        <a mat-flat-button color="primary" routerLink="/recipes/new">
            <mat-icon>add</mat-icon>
            Dodaj przepis
        </a>
    </pych-page-header>

    @if (isInitialLoading()) {
        <div class="initial-loading">
            <div class="loading-spinner"></div>
            <p>Ładowanie...</p>
        </div>
    } @else {
        <div class="recipes-list-page__content">
            <pych-recipes-filters
                [initialFilters]="filters()"
                [categories]="categories()"
                [tags]="tags()"
                (filtersChange)="onFiltersChange($event)"
            />

            @if (recipes().length === 0 && !isLoading()) {
                <pych-empty-state
                    icon="menu_book"
                    title="Brak przepisów"
                    description="Nie masz jeszcze żadnych przepisów. Dodaj swój pierwszy przepis lub zaimportuj go z tekstu."
                >
                    <a mat-flat-button color="primary" routerLink="/recipes/new">
                        <mat-icon>add</mat-icon>
                        Dodaj przepis
                    </a>
                </pych-empty-state>
            } @else {
                <pych-recipe-list
                    [recipes]="recipes()"
                    [isLoading]="isLoading()"
                />

                @if (pagination().totalItems > 0) {
                    <mat-paginator
                        [length]="pagination().totalItems"
                        [pageSize]="paginationState().limit"
                        [pageIndex]="paginationState().page - 1"
                        [pageSizeOptions]="pageSizeOptions"
                        (page)="onPageChange($event)"
                        showFirstLastButtons
                        aria-label="Wybierz stronę"
                    />
                }
            }
        </div>
    }
</div>
