<div class="recipes-list-page">
    <header class="page-header">
        <h1>Moje przepisy</h1>
        <div class="header-actions">
            <a mat-stroked-button routerLink="/recipes/import">
                <mat-icon>upload_file</mat-icon>
                Importuj przepis
            </a>
            <a mat-flat-button color="primary" routerLink="/recipes/new">
                <mat-icon>add</mat-icon>
                Dodaj przepis
            </a>
        </div>
    </header>

    @if (isInitialLoading()) {
        <div class="initial-loading">
            <div class="loading-spinner"></div>
            <p>Ładowanie...</p>
        </div>
    } @else {
        <pych-recipes-filters
            [initialFilters]="filters()"
            [categories]="categories()"
            [tags]="tags()"
            (filtersChange)="onFiltersChange($event)"
        />

        <pych-recipe-list
            [recipes]="recipes()"
            [isLoading]="isLoading()"
        />

        @if (pagination().totalItems > 0) {
            <mat-paginator
                [length]="pagination().totalItems"
                [pageSize]="paginationState().limit"
                [pageIndex]="paginationState().page - 1"
                [pageSizeOptions]="pageSizeOptions"
                (page)="onPageChange($event)"
                showFirstLastButtons
                aria-label="Wybierz stronę"
            />
        }
    }
</div>
