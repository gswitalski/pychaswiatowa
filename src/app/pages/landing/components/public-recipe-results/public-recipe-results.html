<!-- Skeleton loader - ładowanie początkowe -->
@if (loadingInitial()) {
    <div class="recipes-grid skeleton-grid" aria-busy="true" aria-label="Ładowanie przepisów">
        @for (item of [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]; track item) {
            <div class="skeleton-card">
                <div class="skeleton-image"></div>
                <div class="skeleton-content">
                    <div class="skeleton-title"></div>
                    <div class="skeleton-category"></div>
                </div>
            </div>
        }
    </div>
}

<!-- Stan błędu -->
@if (errorMessage() && !loadingInitial()) {
    <div class="error-state" role="alert">
        <mat-icon class="error-icon">error_outline</mat-icon>
        <h2>Coś poszło nie tak</h2>
        <p>{{ errorMessage() }}</p>
        <button mat-raised-button color="primary" (click)="onRetry()">
            <mat-icon>refresh</mat-icon>
            Spróbuj ponownie
        </button>
    </div>
}

<!-- Empty state -->
@if (showEmptyState() && emptyStateText()) {
    <div class="empty-state" role="status">
        <mat-icon class="empty-icon">search_off</mat-icon>
        <p>{{ emptyStateText() }}</p>
    </div>
}

<!-- Lista przepisów -->
@if (!loadingInitial() && !errorMessage() && items().length > 0) {
    <div class="recipes-grid" [class.loading-more]="loadingMore()">
        @for (recipe of items(); track trackById($index, recipe)) {
            <div class="recipe-card-wrapper">
                <pych-recipe-card
                    [recipe]="mapToCardData(recipe)"
                    [isOwnRecipe]="recipe.is_owner"
                    [inMyCollections]="recipe.in_my_collections"
                    routeType="public"
                />
                @if (getMatchLabel(recipe)) {
                    <div class="match-label">
                        Dopasowanie: {{ getMatchLabel(recipe) }}
                    </div>
                }
            </div>
        }
    </div>

    <!-- Przycisk "Więcej" -->
    @if (showLoadMoreButton()) {
        <div class="load-more-container">
            <button
                mat-stroked-button
                color="primary"
                [disabled]="loadingMore()"
                (click)="onLoadMore()"
                aria-label="Załaduj więcej przepisów"
            >
                @if (loadingMore()) {
                    <mat-spinner diameter="20"></mat-spinner>
                }
                <span>{{ loadMoreButtonText() }}</span>
            </button>
        </div>
    }
}

