<div class="recipe-list-container" [class.is-loading]="isLoading()">
    @if (isLoading() && recipes().length === 0) {
        <div class="loading-overlay">
            <mat-spinner diameter="48"></mat-spinner>
        </div>
    } @else if (recipes().length === 0) {
        @if (emptyStateTemplate) {
            <ng-container *ngTemplateOutlet="emptyStateTemplate" />
        } @else {
            <pych-empty-state
                [icon]="emptyStateIcon()"
                [title]="emptyStateTitle()"
                [description]="emptyStateDescription()"
            />
        }
    } @else {
        <div class="recipes-grid">
            @for (recipe of recipes(); track recipe.card.id) {
                <pych-recipe-card
                    [recipe]="recipe.card"
                    [showCategory]="showCategory()"
                    [showRemoveAction]="showRemoveAction()"
                    [isOwnRecipe]="recipe.isOwnRecipe ?? false"
                    [inMyCollections]="recipe.inMyCollections ?? false"
                    [routeType]="routeType()"
                    [isTermorobot]="recipe.card.isTermorobot ?? false"
                    (remove)="onRemoveRecipe(recipe.card.id)"
                />
            }
        </div>

        @if (useLoadMore()) {
            <!-- Tryb "Load More" -->
            @if (isLoadingMore()) {
                <div class="loading-more-indicator">
                    <mat-spinner diameter="32"></mat-spinner>
                </div>
            }

            @if (hasMore() && !isLoadingMore()) {
                <div class="load-more-container">
                    <button
                        mat-flat-button
                        color="primary"
                        [disabled]="isLoadingMore() || isLoading()"
                        (click)="onLoadMore()"
                        class="load-more-button"
                    >
                        {{ isLoadingMore() ? loadingMoreLabel() : loadMoreLabel() }}
                    </button>
                </div>
            }
        } @else {
            <!-- Tryb Paginator (domyÅ›lny) -->
            @if (isLoading()) {
                <div class="loading-indicator">
                    <mat-spinner diameter="32"></mat-spinner>
                </div>
            }

            @if (usePaginator()) {
                @if (pagination(); as pag) {
                    <mat-paginator
                        [length]="pag.totalItems"
                        [pageSize]="pageSize()"
                        [pageIndex]="pag.currentPage - 1"
                        [pageSizeOptions]="pageSizeOptions()"
                        (page)="onPageChange($event)"
                        showFirstLastButtons
                    />
                }
            }
        }
    }
</div>
